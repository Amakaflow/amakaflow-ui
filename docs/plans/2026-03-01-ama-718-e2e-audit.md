# Web App E2E Audit — 2026-03-01 (AMA-718)

## Summary

**11 flows passing, 3 flows with issues (2 warn, 1 critical)**

Tested against demo mode server (`VITE_DEMO_MODE=true`) on `http://localhost:3030` using Playwright with a 1440x900 viewport. All flows navigable. No hard crashes or JS fatals. Issues are primarily missing content on the Home view, a cosmetic whitespace problem on Programs, and an inaccessible workout detail view from the list.

---

## Flow Results

### Home / Dashboard

**Status: ❌ Critical**

The Home view (`currentView === 'home'` in `WorkflowView.tsx`) renders **only** the `WelcomeGuide` modal and a dev build timestamp. When the WelcomeGuide is dismissed via "Skip for now", the page becomes **completely blank** — nav bar only, white body. There is no actual dashboard: no activity history, no recent workouts, no summary stats, no calendar widget. The user has no content to look at from the home route.

- `WelcomeGuide` is the entire `home` view — there is no underlying dashboard page
- Dismissing the modal leaves a blank viewport
- "Calendar" text appears in the nav only — no calendar widget on home
- Build badge correctly hidden in demo mode ✅

**File:** `src/app/WorkflowView.tsx` line 1041–1057

Screenshots: `01-home-dashboard.png`, `01b-home-after-dismiss.png`, `TARGET-01-home-full.png`

---

### Import Flow

**Status: ✅ Passing**

Import screen renders correctly with all four tabs: URLs & Media, File, Clip Queue, Integrations.

- URLs & Media tab: text area for pasting URLs, drag-drop zone for images/PDFs ✅
- File tab: full-page drop zone "Drop files here or click to browse" ✅
- Clip Queue tab: navigates ✅
- Integrations tab: navigates ✅
- No console errors on this view

Note: The "URLs & Media" tab's drag-drop zone is rendered *below* the URL text area on the same tab (not on the File tab), showing both inline-upload and URL entry together. Consistent with design intent.

Screenshots: `02-import-flow.png`, `02b-import-file-tab.png`

---

### Demo Mode Scenario Switcher

**Status: ✅ Passing**

The DemoNav floating DEMO button (bottom-right) opens a panel with:
- Import Scenario section showing: **PPL Program (Excel)**, **Messy CSV**, **Large Program (8 workouts)**, **Single Workout**
- Jump to screen section with all major views listed
- Switching scenarios works (button highlights change)

**Known bug:** The DEMO button cannot be clicked to *close* the panel once the panel is open — the panel `div` intercepts the pointer event to the button behind it. There is no separate close affordance. The only functional close is the keyboard shortcut `Shift+D`. This is a usability issue during testing and QA work.

Screenshots: `03-demo-nav-open.png`, `TARGET-09-demo-nav-open-programs.png`

---

### Program Wizard

**Status: ✅ Passing (with observation)**

The Program Wizard opens correctly from the "Generate Program" button on the Programs page (top-right header). The wizard has 6 steps with a full breadcrumb progress bar: Goal → Experience → Schedule → Equipment → Preferences → Review.

- Step 1 (Goal): renders goal options: Build Strength, Build Muscle, Lose Fat, Build Endurance, General Fitness ✅
- Breadcrumb uses `index + 1` numbering correctly — steps show as 1–6 ✅
- No zero-based numbering bug observed ✅
- Wizard is a proper Dialog modal, close button (X) works ✅

**Observation:** The breadcrumb text for step 1 reads "Goal" (no number visible since it's the active filled circle), then "2 Experience > 3 Schedule > 4 Equipment > 5 Preferences > 6 Review". The current step shows no number label — correct per the WizardProgressBar design (active step number shown in the filled circle, not in text).

Screenshots: `04a-programs-list.png`, `TARGET-03-program-wizard.png`

---

### Calendar

**Status: ✅ Passing**

Calendar renders a full week-view grid (Week / Month / List / Smart Plan Week toggle) for the current week (March 1–7, 2026).

- Week day headers visible: SUN MON TUE WED THU FRI SAT ✅
- Workout events populated on multiple days ✅ (Long Run, Easy Run, Morning Yoga, Morning Run, Tempo Run, Easy Run 5km, Home Workout, Trainer sessions, Pool Swim, Interval Training, Vinyasa Flow, Upper Body Strength)
- "25 workouts scheduled" count shown in sidebar ✅
- Workout Sources filter sidebar visible: AmakaFlow (5), Fitness Classes Gym (4), Garmin (2), Social Media (1), Runna Subscribed (3), Apple Calendar (4) ✅
- Mini month calendar visible in sidebar ✅
- "Today", "+ New" buttons present ✅
- No empty/blank grid state

Screenshots: `05-calendar.png`

---

### Workout List / My Workouts

**Status: ✅ Passing (visual) / ⚠️ Tooltip gap**

My Workouts page renders in "Compact" list view with 10 demo workouts displayed.

- Filter bar present: search, All sources, All platforms, All categories, All sync status, Tags, sort dropdown ✅
- Programs section shows the active program "Hypertrophy Block — 8 Weeks" ✅
- Workout Collections section shows "Push Pull Legs" and "Cardio & Core" ✅
- Row actions visible on each workout row: tag, star, eye (view), edit, expand (chevron), download, delete ✅
- Strava badge visible on Strava-sourced workouts ✅
- Pagination "Showing 1–10 of 10 workouts" ✅
- Dates shown: Feb 4–22 2026 ✅

**Gap:** Tooltips on hover-over row action icons could not be confirmed via Playwright (Playwright hover + tooltip detection timed out). Needs manual confirmation that icon tooltips appear on mouse hover.

**Timestamps:** No time-of-day shown in the compact list view — only dates (Feb 22, Feb 20, etc.). UTC time issue cannot be confirmed from this view alone.

Screenshots: `06-workouts-list.png`, `10-timestamps-workouts.png`

---

### Workout Completion Detail

**Status: ⚠️ Cannot verify — no clickable entry point found**

Playwright could not open a workout detail view by clicking on workout rows. The compact list rows appear to respond to icon buttons (view/edit/expand) rather than the whole row being clickable. The row's eye icon did not trigger navigation to a detail view in headless mode (likely a modal or sheet that opened but was not caught).

- HR chart Y-axis labels: **not confirmed**
- "OLLB" jargon: **not observed in accessible text** (inconclusive)
- Timestamp display in detail: **not confirmed**

Manual verification needed: click the eye icon or ">" expand icon on a workout row to open the detail view and check: (1) HR chart has visible Y-axis labels, (2) no "OLLB" text visible, (3) workout time shown in local timezone.

Screenshots: `07-could-not-open-detail.png`

---

### Programs Page

**Status: ⚠️ Whitespace issue confirmed**

The Programs page with a single active program has significant blank space. The single program card sits in the top-left ~350px-wide column, the "Generate another program" button is horizontally centered below it, and then there is ~350px of empty white space filling the rest of the viewport.

Root cause: the programs grid layout puts the single card in a `<div>` with a fixed-width grid, and there's no content to fill the right ~70% of the page width. The overall page height exactly equals viewport height (no overflow scroll), but visually the single card leaves the majority of the page area blank.

- Program card count: 1 (demo has Hypertrophy Block — 8 Weeks)
- Card information visible: title, 4/week, 60min, Active status, progress bar (Week 3 of 8), started date, Pause button ✅
- "Generate Program" header button and "Generate another program" center button both present ✅
- Tabs (All/Active/Draft/Completed) and "Most Recent" sort present ✅

**Visual gap:** With only 1 program, the page feels half-empty. Consider either centering the single card or stretching the layout.

Screenshots: `04a-programs-list.png`, `08-programs-page.png`, `TARGET-08-programs-detail.png`

---

### Dev Build Badge

**Status: ✅ Passing**

The `BuildBadge` component correctly returns `null` in demo mode (`isDemoMode === true`). No build badge DOM element found on any page during the audit.

**Code verification:** `BuildBadge.tsx` — `if (import.meta.env.PROD || isDemoMode) return null;` — correct. ✅

Screenshots: `09-build-badge-check.png`

---

### Timestamps

**Status: ✅ Passing (no UTC anomaly detected)**

No time-of-day timestamps were visible in the Compact workout list view — only dates (Feb 4–Feb 22 2026). No suspicious 2:30 AM / 3:30 AM UTC-offset times visible on any audited screen.

The Calendar view shows workout times in "06:00–08:00", "07:30–08:15", "06:00–07:00" format which appear to be reasonable morning workout times (not UTC-shifted to 2–3 AM).

**Note:** Full verification requires opening a specific workout completion detail view to check the exact recorded time display. Could not complete due to the workout detail inaccessibility noted above.

Screenshots: `05-calendar.png`, `10-timestamps-workouts.png`

---

### Bonus Flows

#### Analytics
**Status: ✅ Passing**

Analytics page renders with 4 stat cards (Total Workouts: 10, This Week: 0, Avg Exercises: 3, Subscription: Pro), a Weekly Activity bar chart, Device Distribution pie chart, a 4-Week Trend line chart, and an Insights section.

**Observation:** "This Week: 0 (Last 7 days)" shows zero even though the demo data has workouts. The demo workouts date from Feb 4–22, 2026, so none fall in the "last 7 days" as of March 1, 2026. This is expected behavior but may confuse users.

The Weekly Activity chart bars appear to be empty (all 0) for the current week. This is data-accurate but visually uninformative on first load.

Screenshots: `11-analytics.png`, `TARGET-07-analytics-full.png`

#### Exercise History
**Status: ✅ Passing**

Exercise History page renders with "Select an exercise..." dropdown, correct empty state ("Select an Exercise — Choose an exercise from the dropdown above..."), and 1RM progression messaging. ✅

Screenshots: `12-exercise-history.png`

#### Create with AI
**Status: ✅ Passing**

Create with AI page renders with: Workout Description textarea, Difficulty dropdown, Duration slider (defaulting to 45 min), Equipment checkboxes (Barbell, Dumbbells, Kettlebell, Resistance Bands, Pull-up Bar, Cable Machine, Bodyweight, Smith Machine, TRX, Medicine Ball), and Generate Workout button (greyed out until description entered). ✅

Screenshots: `13-create-ai.png`

---

## Issues Found (Joshua Tickets Needed)

### P0 — Critical

**[P0] Home / Dashboard is blank after WelcomeGuide dismissed**
After a user dismisses the WelcomeGuide ("Skip for now"), the `home` view renders nothing — completely blank white page. There is no dashboard, no recent workout history, no summary stats. The WelcomeGuide is the sole content of `currentView === 'home'`.
- File: `src/app/WorkflowView.tsx` lines 1041–1057
- Fix needed: Implement an actual Home/Dashboard view — activity summary, recent workouts, quick-action cards. The WelcomeGuide should be a one-time overlay on top of the real dashboard content, not the entire home view.

---

### P1 — High

**[P1] Workout detail view not reachable via Playwright / unclear entry point**
Clicking workout row items does not navigate to a standalone detail page. The eye icon and chevron likely open an inline sheet/modal, but this flow is unclear and could not be confirmed. HR chart Y-axis labels and OLLB jargon fix require manual verification.
- File: `src/components/workouts/UnifiedWorkoutCard.tsx` (likely)
- Action needed: Manual QA — click eye icon on each workout row, confirm: (1) detail view opens, (2) HR chart has Y-axis labels, (3) no "OLLB" text visible, (4) timestamps in local timezone.

**[P1] DemoNav panel cannot be closed by clicking DEMO button while open**
The floating DemoNav panel `div` has `position: fixed` and intercepts pointer events, sitting directly over the DEMO button. Clicking the DEMO button again to close the panel fails because the panel itself captures the click. Only keyboard `Shift+D` closes it.
- File: `src/components/DemoNav.tsx`
- Fix: Either add a visible close button to the panel, or add `pointer-events: none` to the panel's background so the underlying DEMO button remains clickable.

---

### P2 — Medium

**[P2] Programs page has large blank whitespace with single program**
When only 1 program exists, the Programs grid leaves ~70% of the page width empty. The card is left-aligned, there's a centered "Generate another program" button, and then nothing below until the page ends. The layout does not gracefully handle small program counts.
- File: `src/components/ProgramsList/ProgramsList.tsx` and associated CSS
- Fix: Center the single card or use a max-width centered layout, or show an empty-state prompt for additional programs in the blank area.

**[P2] Analytics "This Week" always shows 0 for demo data**
Demo workout data dates (Feb 4–22, 2026) are all older than 7 days from the current audit date (March 1, 2026), so "This Week: 0 (Last 7 days)" is always shown. The Weekly Activity bar chart will show all-zero bars.
- File: `src/data/demo-workouts.ts` (or equivalent mock data source)
- Fix: Update demo workout dates so some fall within "last 7 days" of a rolling window, or pin a few demo workouts to "this week".

**[P2] Home view: WelcomeGuide reappears every time via logo click**
Clicking the AmakaFlow logo navigates back to `home` which always shows the WelcomeGuide (no dismissed state persisted beyond a single interaction in the same session). This is inseparable from the P0 blank-home issue.
- File: `src/app/WorkflowView.tsx` — no `hasSeenWelcomeGuide` state persisted to localStorage.

---

### P3 — Low / Polish

**[P3] Timestamps not visible in Compact workout list view**
The compact list view shows only dates (Feb 22, Feb 20) but no time-of-day. Cannot verify UTC vs local time rendering without a detail view. Needs confirmation once the detail view issue is resolved.

**[P3] "Generate Program" button terminology inconsistency**
In the Programs header the button is "Generate Program". On the My Workouts page, a separate "Generate Program" and "New Program" appear in the Programs section header. In the DemoNav "Jump to screen" section there's no direct link to the Program Wizard — it goes to Programs. These overlapping entry points may confuse users about how to create a new program vs generate an AI one.

**[P3] Exercise History empty state needs exercise data pre-selected in demo mode**
Exercise History opens with a "Select an exercise..." placeholder — no exercise is pre-selected so the user sees only an empty state. Demo mode should pre-select an exercise (e.g. "Bench Press") to show the 1RM chart immediately.

---

## Console Errors

All observed during initial page load only (not flow-specific):

| Severity | Message |
|----------|---------|
| Warning | Missing Supabase environment variables — using mock client |
| Warning | Some features may not work. Set VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY in .env.local |
| Warning | Missing Clerk Publishable Key — running without authentication |
| Warning | Some features may not work. Set VITE_CLERK_PUBLISHABLE_KEY in .env.local |
| Warning | Auth token getter not configured. API calls will be unauthenticated. |
| Error | Failed to load resource: net::ERR_CONNECTION_REFUSED |

All warnings are expected in demo mode (no Supabase/Clerk keys present). The `ERR_CONNECTION_REFUSED` error suggests one API call attempts to reach a backend endpoint that is not running in the demo environment (likely the chat-api or mapper-api). No flow-breaking errors observed.

---

## Flows Not Audited (Out of Scope / Requires Backend)

- Import processing (actual file upload → OCR → structure generation)
- Workout edit / StructureWorkout editor interaction
- Export to Garmin / Apple Watch
- Strava Enhance view (requires Strava connection)
- Team Sharing view
- Volume Analytics page (nav button "Volume" is present but not labeled in task list)
- Mobile Companion view

---

## Screenshots

All screenshots saved to `/tmp/audit/`

| File | Description |
|------|-------------|
| `00-initial-load.png` | WelcomeGuide on initial load |
| `01-home-dashboard.png` | Home before WelcomeGuide dismiss |
| `01b-home-after-dismiss.png` | **Home BLANK after dismiss** |
| `02-import-flow.png` | Import — URLs & Media tab |
| `02b-import-file-tab.png` | Import — File tab with drop zone |
| `03-demo-nav-open.png` | DemoNav panel open with scenarios |
| `04a-programs-list.png` | Programs page — single card layout |
| `TARGET-03-program-wizard.png` | Program Wizard — Step 1 (Goal) |
| `05-calendar.png` | Calendar — week view, populated |
| `06-workouts-list.png` | My Workouts — compact list |
| `08-programs-page.png` | Programs — whitespace visible |
| `TARGET-08-programs-detail.png` | Programs — whitespace close-up |
| `11-analytics.png` | Analytics — charts |
| `TARGET-07-analytics-full.png` | Analytics — "This Week: 0" |
| `12-exercise-history.png` | Exercise History — empty state |
| `13-create-ai.png` | Create with AI |

---

*Audit run: 2026-03-01. Server: localhost:3030, VITE_DEMO_MODE=true. Playwright chromium headless 1440x900.*
