# Wear OS Smoke Test Flow
# Validates wear app launches and basic functionality
#
# Run: maestro test flows/android/wear/smoke.yaml

appId: com.amakaflow.companion.wear

onFlowError:
  - takeScreenshot: artifacts/screenshots/wearos-smoke-error

---

# Launch the wear app with clean state
- launchApp:
    clearState: true
    stopApp: true

# Wait for app to load
- extendedWaitUntil:
    visible:
      id: "wear_main_screen"
    timeout: 15000

# Take screenshot of initial state
- takeScreenshot: artifacts/screenshots/wearos-smoke-01-launch

# Verify main screen loaded with specific assertions
- assertVisible:
    id: "wear_main_screen"
- assertNotVisible:
    id: "error_view"
    optional: true

- takeScreenshot: artifacts/screenshots/wearos-smoke-02-main

# Verify start workout button exists - MUST be present
- assertVisible:
    id: "start_workout_button"

- takeScreenshot: artifacts/screenshots/wearos-smoke-03-ready

# Final assertions
- assertVisible:
    id: "wear_main_screen"
- assertVisible:
    id: "start_workout_button"
- assertNotVisible:
    id: "error_view"
    optional: true
- assertNotVisible:
    id: "crash_dialog"
    optional: true
